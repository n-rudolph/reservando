@()
@views.html.main("Reservando") {
    @ownerNav()
    <div class="container" ng-controller="RestaurantCtrl">
        <div class="row image-holder">
            <img ng-src="@routes.Assets.versioned("{{restaurant.photo.path}}")" alt="" class="materialboxed" width="100%" height="300px">
            <div class="btn btn-floating"><i class="material-icons">edit</i></div>
        </div>
        <div class="row">
            <div class="col s12 info-contanier" ng-hide="editMode">
                <div class="row title">
                    <div class="col s8">
                        <h3>{{restaurant.name}}</h3>
                        <p>Todavia no fue calificado</p>
                    </div>
                    <div class="col s2" ng-hide="restaurant.published">
                        <div class="btn rigth" ng-click="publicateRestaurant(true)">Publicar</div>
                    </div>
                    <div class="col s2" ng-show="restaurant.published">
                        <div class="btn orange" ng-click="publicateRestaurant(false)">No Publicar</div>
                    </div>
                    <div class="col s2">
                        <div class="btn rigth" ng-click="toggleEditMode(true)">Modificar</div>
                    </div>
                </div>
                <div class="row">
                    <p class="address"><i class="material-icons">location_on</i>{{restaurant.address}}</p>
                    <p class="cuisine"><i class="material-icons">restaurant</i><span ng-repeat="cuisine in restaurant.cuisines">{{ $first ? "" : ","}} {{cuisine.name}}</span></p>
                </div>
                <div class="row">
                    <p class="opening-days" ng-show="restaurant.days.length() == 7"><i class="material-icons">data_range</i> Todos los días</p>
                    <p class="opening-days" ng-hide="restaurant.days.length() == 7"><i class="material-icons">date_range</i><span ng-repeat="day in restaurant.openingDays">{{$first?"":", "}}{{day.day}}</span></p>
                    <p class="opening-time"><i class="material-icons">schedule</i> De {{restaurant.openingHour}} a {{restaurant.closingHour}}</p>
                </div>
            </div>
            <div class="col s12 info-container-edit" ng-show="editMode">
                <div class="row">
                    <div class="col s8 input-field">
                        <input type="text" ng-model="restaurantEdit.name" id="name-edit">
                        <label for="name-edit">Nombre</label>
                    </div>
                    <div class="col s2">
                        <div class="btn error" ng-click="toggleEditMode(false)">Cancelar</div>
                    </div>
                    <div class="col s2">
                        <div class="btn error">Guardar</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col s6 input-field">
                        <input type="text" id="address" class="validate field" onfocus="geolocate()" placeholder="" ng-model="restaurantEdit.address">
                        <label for="address">Dirección</label>
                    </div>
                    <div class="col s6 input-field" ng-hide="restaurantEdit.isLocal">
                        <input type="number" id="radius-edit" ng-model="restaurantEdit.radius">
                        <label for="radius-edit">Radio</label>
                    </div>
                    <div class="col s6 input-field" ng-show="restaurantEdit.isLocal">
                        <input type="number" id="capacity-edit" ng-model="restaurantEdit.capacity">
                        <label for="capacity-edit">Capacidad</label>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12 input-field">
                        <textarea class="materialize-textarea" type="text" ng-model="restaurantEdit.description" id="descripton-edit"></textarea>
                        <label for="descripton-edit">Descripción</label>
                    </div>
                </div>
                <div class="row">
                    <h4>Días de atención</h4>
                    <div class="col" ng-class="{m3: selectedDays, m12: !selectedDays || selectedDays.length == 0}">
                        <div class="input-field col m12" ng-class="{customInvalid: errors.days}">
                            <select ng-model="selectedDays" material-select multiple watch>
                                <option value="" disabled selected>Seleccionar</option>
                                <option ng-repeat="day in days" ng-value="day.day">{{day.day}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col m9" ng-show="selectedDays">
                        <div class="chip" chips ng-repeat="day in selectedDays">{{day}}</div>
                    </div>
                </div>
                <div class="row">
                    <h4>Horario de atención</h4>
                    <div class="col m6">
                        <div class="input-field">
                            <label for="input_starttime">De</label>
                            <input type="text" id="input_starttime" input-clock data-twelvehour="false" ng-model="restaurantEdit.startTime" data-default="{{initTime}}" ng-class="{invalid: errors.time}">
                        </div>
                    </div>
                    <div class="col m6">
                        <div class="input-field">
                            <label for="input_endtime">Hasta</label>
                            <input type="text" id="input_endtime" input-clock data-twelvehour="false" ng-model="restaurantEdit.endTime" data-default="{{endTime}}" ng-class="{invalid: errors.time}">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <h4>Tipo de comida</h4>
                    <div class="col" ng-class="{m3: selectedCuisines, m12: !selectedCuisines || selectedCuisines.length == 0}">
                        <div class="input-field col m12" ng-class="{customInvalid: errors.cuisines}">
                            <select ng-model="selectedCuisines" material-select multiple watch >
                                <option value="" disabled selected>Seleccionar</option>
                                <option ng-repeat="cuisine in cuisines" ng-value="cuisine.name">{{cuisine.name}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col m9" ng-show="selectedCuisines">
                        <div class="chip" chips ng-repeat="cuisine in selectedCuisines">{{cuisine}}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" ng-hide="editMode">
            <div class="col s6">
                <div class="row">
                    <p>{{restaurant.description}}</p>
                </div>
                <div class="row">
                    <ng-map center="[40.74, -74.18]">
                    </ng-map>
                </div>
            </div>
            <div class="col s6 menu">
                <div class="row">
                    <div class="col s2 offset-s5">
                        <h5>Menu</h5>
                    </div>
                    <div class="col s1 offset-s4">
                        <div class="btn-floating accent-color" ng-click="openAddRestaurant()"><i class="material-icons">add</i></div>
                    </div>
                </div>
                <div class="row" ng-repeat="meal in restaurant.menu">
                    <div class="col s4">
                        <img src="" alt="">
                    </div>
                    <div class="col s8">
                        <h5>{{meal.name}}</h5>
                        <p>{{meal.price}}</p>
                        <p>{{meal.description}}</p>
                    </div>
                </div>
                <div class="row" ng-hide="restaurant.menu.length > 0">
                    <p>El menu todavia no se encuentra definido</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col s4 offset-s4">
                <div class="btn btn-large red delete waves-effect waves-orange" ng-click="openDelete()">Eliminar</div>
            </div>
        </div>

            <!-- Delete Modal -->
        <div id="deleteModal" class="modal">
            <div class="modal-content">
                <h4>Eliminar Restaurant</h4>
                <h5>¿Seguro desea eliminar el restaurant <span>{{restaurant.name}}?</span></h5>
            </div>
            <div class="modal-footer">
                <div class="modal-action waves-effect waves-green btn btn-flat" ng-click="deleteRestaurant()">Eliminar</div>
                <div class="modal-action modal-close waves-effect waves-green btn btn-flat">Cancelar</div>
            </div>
        </div>

            <!-- Modal Structure -->
        <div id="newMealModal" class="modal">
            <div class="modal-content">
                <h4>Agregar comida</h4>
                <div class="row">
                    <div class="col s12 input-field">
                        <input type="text" ng-model="newMeal.name" id="newMealName">
                        <label for="newMealName">Nombre</label>
                    </div>
                    <div class="col s12 input-field">
                        <input type="number"min="0" ng-model="newMeal.price" id="newMealPrice">
                        <label for="newMealPrice">Precio</label>
                    </div>
                    <div class="col s12 input-field">
                        <textarea class="materialize-textarea" ng-model="newMeal.description" id="newMealDescription"></textarea>
                        <label for="newMealDescription">Descripción</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="modal-action modal-close waves-effect waves-green btn btn-flat">Guardar</div>
                <div class="modal-action modal-close waves-effect waves-green btn btn-flat">Cancelar</div>
            </div>
        </div>
    </div>
} {
    <link rel="stylesheet" href="@routes.Assets.versioned("external/materialize-clockpicker/dist/css/materialize.clockpicker.css")">
    <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/owner/restaurant.css")">
} {
    <script src="@routes.Assets.versioned("external/materialize-clockpicker/dist/js/materialize.clockpicker.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/utils/geocode.js")"></script>
    <script src="http://maps.google.com/maps/api/js"></script>
    <script src="@routes.Assets.versioned("external/ngMap/ng-map.min.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/owner/restaurant.js")"></script>
}